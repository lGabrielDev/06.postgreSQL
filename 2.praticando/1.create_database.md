## CREATE DATABASE

Comando usado para criar um banco de dados.
## Introdução



### Comentários

    --     ->  comenta uma linha
    /* */  ->  comenta um bloco


<hr>

### Tabelas
Quando estamos trabalhando com banco de dados, podemos dizer que estamos trabalhando com tabelas.

Nessas tabelas, temos os campos e os dados.

    Field = Column = Campo 
    Row   = Record = Dados = Linhas


Essas tabela podem se relacionar com outras tabelas e podem ser de 2 tipos:

    Tabela Fato: Vendas,Pedidos... Os valores podem se repetir. Um produto pode ser vendido várias vezes.
    
    Tabela dimensão: Tabelas de cadastro. O mesmo produto não se repete.
<hr>

### Keys

    PRIMARY KEY (PK) -> Valor único que não se repete.

    FOREIGN KEY (PK) -> Chave primária de outra tabela. Usada para relacionar tabelas.


<hr>

> SGBD = Sistema de gerenciamento de banco de dados

<hr>
<br>

## CREATE DATABASE
 Antes de sair fazendo `SELECT` , você precisa primeiro escolher o banco de dados que quer consultar:

 `PostgreSQL`

```sql
    \c 'nome_do_banco';
```

```sql
    \connect 'nome_do_banco';
```


`mysql`
```sql
    USE 'nome_do_banco';
```















    
 Criando tabelas
 Para criar uma tabela, eu preciso dizer o nome da tabela, quais são as colunas dessa tabela, especificar o tipo de dado de cada coluna, e por fim a constraint(restrição) da coluna.
 Preciso pensar no melhor tipo de dado para otimizar espaço do meu disco.Por exemplo(tinyINT consome menos bits do que o bigInt,etc..)
 Importante lembrar que toda tabela precisa de uma Primary Key.
 Crie uma tabela com as seguntes colunas:

 1-Nome,idade,sexo,peso,altura e nacionalidade. Lembre-se que idade não é interessante.Troque para data de nascimento.
 2-Defina o Data Type de cada coluna
 3 Defina a constraint de cada coluna, se precisar.
 4 Agora eu defino qual das colunas acima será minha primary key. PRIMARY KEY (column_name)
 A PRIMARY KEY é interessante deixar em AUTO_INCREMENT.Sempre que eu adicionar uma linha será auto preenchida o campo ID.


 A estrutura será assim:

 CREATE TABLE table_name (
 column1 datatype constraint,
 column2 datatype constraint,
 column3 datatype constraint,
    ....
 Aqui eu posso usar o termo IF NOT EXIST antes do nome da table. Se tentar criar uma tabela nova e já existir esse nome da table , vai aparecer um aviso.


 1- Crie uma tabela com as especificações acima, juntamente com a primary key:

CREATE TABLE cadastro (
	ID_Cadastro 			INT 			NOT NULL AUTO_INCREMENT,  Não pode ser vazio e vai se auto preencher.
	nome 					varchar(30)		NOT NULL,  Usado para não permitir que se digite valores nulos/vazios. Têm que digitar algum nome de até 30 caracteres 
	Nascimento 				date, 
	sexo 					ENUM('M','F'),  Especifico o que eu quero que seja digitado(M ou F apenas).
	peso 					DECIMAL(4,2),  5= Número de casas e 2= Números após a virgula.
	altura 					DECIMAL(3,2),  1,80 m
	nacionalidade 			VARCHAR (20) 	DEFAULT 'Brasil',  Se não for digitado nada, o padrão vai ser 'Brasil'
    
	PRIMARY KEY (ID_Cadastro)
)
DEFAULT CHARSET utf8mb4;



 Pronto. A tabela 'Cadastro' foi criada.


 Retire a PRIMARY KEY da tabela: 
 Se não conseguir remover, dou um MODIFY COLUMN e tiro o AUTO_INCREMENT. e dropo o INDEX

 ALTER TABLE table_name
 DROP PRIMARY KEY;


 Coloque a PRIMARY KEY em outra column.
 Primeiro eu preciso dropar a PRIMARY KEY e só depois colocar em outra coluna.


 ALTER TABLE table_name
 ADD PRIMARY KEY (column_name)


 Para alterar a posição da column eu faço:

 ALTER TABLE table_name
 MODIFY COLUMN column_name datatype constraint FIRST/(sem preencher)/After column_name



 Para alterar o nome da table eu faço:

ALTER TABLE tb_zica
RENAME tb_cadastro;


 Agora descreve quais as columns e os data types dessa tabela


DESCRIBE cadastro




 2- Crie uma tabela igual a tabela criada acima, porém SEM  a PRIMARY KEY:
    Só depois de criar a tabela adicione uma nova coluna com a primary key.

 Criar a tabela
 Criar a coluna nova
 Alter table e dizer o nome da coluna PRIMARY KEY.

 		ALTER TABLE
 		ADD CONSTRAINT PRIMARY KEY OU SÓ ADD PRIMARY KEY







/* 
Agora vamos trabalhar com a chave estrangeira.

Vamos usar 2 tabelas:
1-orders
2-customers

As duas tabelas têm em comum a column customersID. É com essa column que eu consigo relacionar essas duas tabelas.


customerID na customers table = PRIMARY KEY na customers table
customerID na orders table	  = FOREIGN KEY na orders table



Vamos treinar:

1- Remova a PRIMARY KEY de customers. 

-Como ela também é uma foreign key na tabela 'orders', eu preciso tirar o index dela na tabela orders. 
-Agora eu tiro a foreign key da tabela orders
-Removo o auto_increment
-Agora sim, removo a primary key.
ALTER TABLE table_name

DROP PRIMARY KEY



2- Adicione novamente essa primary key
ALTER TABLE customers
    ADD CONSTRAINT PK_CustomerID PRIMARY KEY (CustomerID)
    
    
Faça a mesma coisa com a tabela orders:
Drop e depois coloque denovo a primary key




Agora vamos usar a FOREIGN KEY.
Na tabela orders, remova a foreign key e depois adicione novamente.

A foreign key utilizada será a de customerID.


customerID na customers table = PRIMARY KEY na customers table
customerID na orders table	  = FOREIGN KEY na orders table

Para dropar a FOREING KEY eu faço:

Primeiro eu dropo a CONSTRAINT

ALTER TABLE table_name
DROP CONSTRAINT constraint_name				Posso usar também o DROP FOREIGN KEY


Depois eu dropo o index
ALTER TABLE table_name
DROP INDEX index_name  O mesmo nome da constraint.






Para adicionar a FOREING KEY eu faço:



ALTER TABLE orders
ADD CONSTRAINT FK_orders_customers FOREIGN KEY (CustomerID) REFERENCES customers (CustomerID);

'FK_orders_customers' é o nome da minha chave estrangeira

Se der erro, é porque tem valores diferentes nessa column. Deve ter algum customerID em orders que não tenha no customerID no customers. Apague esses valores diferentes.

*/


/*

Se der erro, é por que você tem orders onde o CustomerID não têm na tabela de customers.

A foreign key que você quer usar, precisa ter os mesmos valores nas duas tabelas.

Se por exemplo eu tiver um pedido com CustomerID 47
e na minha tabela de customers não tiver o cliente 47 vai dar erro.

Primeiro deve-se adicionar a foreign key e depois adicionar as linhas, se não dá erro.




Faça o drop e o add da FOREIGN KEY denovo com as tabelas
products, suppliers.

